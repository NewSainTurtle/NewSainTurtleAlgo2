## [ğŸ’¿](https://school.programmers.co.kr/learn/courses/30/lessons/42579) [pg42579] ë² ìŠ¤íŠ¸ì•¨ë²”

> **ì†Œìš” ì‹œê°„: 37ë¶„<br>
> ë©”ëª¨ë¦¬: --KB<br>
> ì‹œê°„: --ms**

## ë¬¸ì œ ì ‘ê·¼
- HashMapê³¼ PriorityQueue ì‚¬ìš©!

## ë¬¸ì œ í’€ì´

1. ì¥ë¥´ëª…ì„ í‚¤ë¡œ í•˜ê³  ì¥ë¥´ì— ì†í•œ ë…¸ë˜ ì´ ì¬ìƒ ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ í•˜ëŠ” HashMap ì •ì˜ `genreMap`
2. ì¥ë¥´ëª…ì„ í‚¤ë¡œ í•˜ê³  ì¥ë¥´ ë‚´ ê°€ì¥ ë§ì´ ì¬ìƒëœ(ê°™ì€ ì¬ìƒ ìˆ˜ë¼ë©´ ê³ ìœ  ë²ˆí˜¸ê°€ ë‚®ì€) ë² ìŠ¤íŠ¸ ë…¸ë˜ 2ê°œë¥¼ ì €ì¥í•˜ëŠ” 2ì°¨ì› ì •ìˆ˜ ë°°ì—´ì„ ê°’ìœ¼ë¡œ í•˜ëŠ” HashMap ì •ì˜ `musicMap`
3. `musicMap`ì˜ ê°’ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ë°°ì—´ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë² ìŠ¤íŠ¸ ì•¨ë²”ì— ì €ì¥ë  ë…¸ë˜ì˜ í¬ê¸°ë¥¼ ì²´í¬í•˜ëŠ” `totalCount` ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œë‹¤.
4. ë…¸ë˜ë¥¼ ê³ ìœ ë²ˆí˜¸ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ë©° mapì— ì €ì¥í•œë‹¤.
	1. `genre`ê°€ ì´ë¯¸ `genreMap`ì— í¬í•¨ëœ ê²½ìš° (ì´ì „ ë…¸ë˜ë“¤ ì¤‘ ê°™ì€ ì¥ë¥´ë¥¼ ê°€ì§„ ë…¸ë˜ê°€ ìˆìŒ)
		1. `genreMap`ì—ì„œ `genre`ë¥¼ í‚¤ë¡œ í•˜ëŠ” ê°’ì„ ê°€ì ¸ì™€ `bestMusic`ì— ì €ì¥í•œë‹¤.
		2. `bestMusic`ì˜ ì²«ë²ˆì§¸ ì €ì¥ëœ ë…¸ë˜ì˜ ì¬ìƒ ìˆ˜ë³´ë‹¤ `plays[idx]`ê°€ í¬ë‹¤ë©´
			1. `bestMusic`ì˜ ë‘ë²ˆì§¸ ì €ì¥ëœ ë…¸ë˜ì˜ ë²ˆí˜¸ê°€ `10001`ì´ë¼ë©´ ë…¸ë˜ê°€ ì¶”ê°€ëœë‹¤ëŠ” ì˜ë¯¸ë¡œ `totalCount`ë¥¼ 1 ì¦ê°€ì‹œí‚¨ë‹¤.
			2. `bestMusic`ì˜ ë‘ë²ˆì§¸ ë…¸ë˜ ìë¦¬ì— `bestMusic`ì˜ ì²«ë²ˆì§¸ ë…¸ë˜ë¥¼ ì €ì¥í•œë‹¤.
			3. `bestMusic`ì˜ ì²«ë²ˆì§¸ ë…¸ë˜ ìë¦¬ì— í˜„ì¬ ë…¸ë˜(`idx`, `plays[idx]`)ë¥¼ ì €ì¥í•œë‹¤.
			4. `musicMap`ì—ì„œ `genre`ë¥¼ í‚¤ë¡œ í•˜ëŠ” ê°’ì„ `bestMusic`ìœ¼ë¡œ ê°±ì‹ í•œë‹¤.
		3. `bestMusic`ì˜ ë‘ë²ˆì§¸ ì €ì¥ëœ ë…¸ë˜ì˜ ì¬ìƒ ìˆ˜ë³´ë‹¤ `plays[idx]`ê°€ í¬ë‹¤ë©´
			1. `bestMusic`ì˜ ë‘ë²ˆì§¸ ì €ì¥ëœ ë…¸ë˜ì˜ ë²ˆí˜¸ê°€ `10001`ì´ë¼ë©´ ë…¸ë˜ê°€ ì¶”ê°€ëœë‹¤ëŠ” ì˜ë¯¸ë¡œ `totalCount`ë¥¼ 1 ì¦ê°€ì‹œí‚¨ë‹¤.
			2. `bestMusic`ì˜ ë‘ë²ˆì§¸ ë…¸ë˜ ìë¦¬ì— í˜„ì¬ ë…¸ë˜(`idx`, `plays[idx]`)ë¥¼ ì €ì¥í•œë‹¤.
			3. `musicMap`ì—ì„œ `genre`ë¥¼ í‚¤ë¡œ í•˜ëŠ” ê°’ì„ `bestMusic`ìœ¼ë¡œ ê°±ì‹ í•œë‹¤.
	2. `genre`ê°€ `genreMap`ì— í¬í•¨ë˜ì§€ ì•Šì€ ê²½ìš°
		1. `genreMap`ì— `genre`ë¥¼ í‚¤, `play[idx]`ë¥¼ ê°’ìœ¼ë¡œ í•˜ì—¬ ìƒˆë¡­ê²Œ ì €ì¥í•œë‹¤.
		2. `musicMap`ì— `genre`ë¥¼ í‚¤, `{{idx,plays[idx]},{10001,0}}`ë¥¼ ê°’ìœ¼ë¡œ í•˜ì—¬ ìƒˆë¡­ê²Œ ì €ì¥í•œë‹¤.
			1. 1ìˆœìœ„ë¥¼ í˜„ì¬ ë…¸ë˜, 2ìˆœìœ„ëŠ” ì•„ì§ ì—†ìœ¼ë¯€ë¡œ ìµœëŒ€ ì…ë ¥ê°’ë³´ë‹¤ í° `10001`ì„ ê³ ìœ ë²ˆí˜¸ë¡œ ì„¤ì •í•˜ì—¬ ì €ì¥í•¨
		3. `totalCount`ë¥¼ 1 ì¦ê°€ì‹œí‚¨ë‹¤.
5. ìš°ì„ ìˆœìœ„ íë¥¼ ë§Œë“¤ì–´ ì¥ë¥´ë¥¼ ë…¸ë˜ ì´ ì¬ìƒìˆ˜ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤.
6. `totalCount` í¬ê¸°ë§Œí¼ `answer` ì •ìˆ˜í˜• ë°°ì—´ì„ ì„ ì–¸í•œë‹¤.
7. `pq`ê°€ ë¹„ì–´ìˆì„ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤.
	1. `pq`ì—ì„œ ê°’ì„ ë¹¼ì„œ ì¥ë¥´ ì´ë¦„ì„ `genre`ì— ì €ì¥í•œë‹¤.
	2. `genreMap`ì—ì„œ `genre`ë¥¼ í‚¤ë¡œ í•˜ëŠ” ê°’ì„ ê°€ì ¸ì™€ `bestMusic`ì— ì €ì¥í•œë‹¤.
	3. `answer`ì— `bestMusic`ì˜ ì²«ë²ˆì§¸ ë…¸ë˜ ê³ ìœ  ë²ˆí˜¸ë¥¼ ì €ì¥í•œë‹¤.
	4. `bestMusic`ì˜ ë‘ë²ˆì§¸ ë…¸ë˜ê°€ ìˆëŠ” ê²½ìš°(ê³ ìœ ë²ˆí˜¸ê°€ `10001`ì´ ì•„ë‹Œ ê²½ìš°)
		1. `answer`ì— `bestMusic`ì˜ ë‘ë²ˆì§¸ ë…¸ë˜ ê³ ìœ  ë²ˆí˜¸ë¥¼ ì €ì¥í•œë‹¤.
8. `answer`ì„ ë°˜í™˜í•œë‹¤.
## ì „ì²´ ì½”ë“œ

```java
import java.util.Map;
import java.util.HashMap;
import java.util.PriorityQueue;

class Solution {
    class Genre implements Comparable<Genre>{
        String genreName;
        int total;
        public Genre (String genreName, int total){
            this.genreName = genreName;
            this.total = total;
        }
        
        @Override
        public int compareTo(Genre o){
            return o.total-total;
        }
    }
    
    public int[] solution(String[] genres, int[] plays) {
        Map<String, Integer> genreMap = new HashMap<>();
        Map<String, int[][]> musicMap = new HashMap<>();
        int totalCount = 0;
        
        for(int idx=0; idx<plays.length; idx++){
            String genre = genres[idx];
            if(genreMap.containsKey(genre)){
                genreMap.replace(genre,genreMap.get(genre)+plays[idx]);
                int[][] bestMusic = musicMap.get(genre);
                if(bestMusic[0][1] < plays[idx]){
                    if(bestMusic[1][0]==10001) totalCount++;
                    bestMusic[1][0] = bestMusic[0][0];
                    bestMusic[1][1] = bestMusic[0][1];
                    bestMusic[0][0] = idx;
                    bestMusic[0][1] = plays[idx];
                    musicMap.replace(genre,bestMusic);
                }else if(bestMusic[1][1] < plays[idx]){
                    if(bestMusic[1][0]==10001) totalCount++;
                    bestMusic[1][0] = idx;
                    bestMusic[1][1] = plays[idx];
                    musicMap.replace(genre,bestMusic);
                }
            }else{
                genreMap.put(genre,plays[idx]);
                musicMap.put(genre,new int[][]{{idx,plays[idx]},{10001,0}});
                totalCount++;
            }
        }
        PriorityQueue<Genre> pq = new PriorityQueue();
        for(Map.Entry<String, Integer> genre : genreMap.entrySet()){
            pq.offer(new Genre(genre.getKey(), genre.getValue()));
        }
        
        int[] answer = new int[totalCount];
        int idx = 0;
        while(!pq.isEmpty()){
            String genre = pq.poll().genreName;
            int[][] bestMusic = musicMap.get(genre);
            answer[idx++] = bestMusic[0][0];
            if(bestMusic[1][0] < 10001) answer[idx++] = bestMusic[1][0];
        }
        return answer;
    }
}
```
